#include <stdio.h>
#include <stdarg.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#include <AL/efx.h>

uintptr_t find_addr_by_symbol(char *symbol);
void hook_thumb(uintptr_t addr, uintptr_t dst);

int ret0();

void openal_patch() {
  hook_thumb(find_addr_by_symbol("alAuxiliaryEffectSlotf"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alAuxiliaryEffectSlotfv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alAuxiliaryEffectSloti"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alAuxiliaryEffectSlotiv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alBuffer3f"), (uintptr_t)alBuffer3f);
  hook_thumb(find_addr_by_symbol("alBuffer3i"), (uintptr_t)alBuffer3i);
  hook_thumb(find_addr_by_symbol("alBufferData"), (uintptr_t)alBufferData);
  hook_thumb(find_addr_by_symbol("alBufferSamplesSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alBufferSubDataSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alBufferSubSamplesSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alBufferf"), (uintptr_t)alBufferf);
  hook_thumb(find_addr_by_symbol("alBufferfv"), (uintptr_t)alBufferfv);
  hook_thumb(find_addr_by_symbol("alBufferi"), (uintptr_t)alBufferi);
  hook_thumb(find_addr_by_symbol("alBufferiv"), (uintptr_t)alBufferiv);
  hook_thumb(find_addr_by_symbol("alDeferUpdatesSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alDeleteAuxiliaryEffectSlots"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alDeleteBuffers"), (uintptr_t)alDeleteBuffers);
  hook_thumb(find_addr_by_symbol("alDeleteEffects"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alDeleteFilters"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alDeleteSources"), (uintptr_t)alDeleteSources);
  hook_thumb(find_addr_by_symbol("alDisable"), (uintptr_t)alDisable);
  hook_thumb(find_addr_by_symbol("alDistanceModel"), (uintptr_t)alDistanceModel);
  hook_thumb(find_addr_by_symbol("alDopplerFactor"), (uintptr_t)alDopplerFactor);
  hook_thumb(find_addr_by_symbol("alDopplerVelocity"), (uintptr_t)alDopplerVelocity);
  hook_thumb(find_addr_by_symbol("alEffectf"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alEffectfv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alEffecti"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alEffectiv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alEnable"), (uintptr_t)alEnable);
  hook_thumb(find_addr_by_symbol("alFilterf"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alFilterfv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alFilteri"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alFilteriv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGenAuxiliaryEffectSlots"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGenBuffers"), (uintptr_t)alGenBuffers);
  hook_thumb(find_addr_by_symbol("alGenEffects"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGenFilters"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGenSources"), (uintptr_t)alGenSources);
  hook_thumb(find_addr_by_symbol("alGetAuxiliaryEffectSlotf"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetAuxiliaryEffectSlotfv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetAuxiliaryEffectSloti"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetAuxiliaryEffectSlotiv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetBoolean"), (uintptr_t)alGetBoolean);
  hook_thumb(find_addr_by_symbol("alGetBooleanv"), (uintptr_t)alGetBooleanv);
  hook_thumb(find_addr_by_symbol("alGetBuffer3f"), (uintptr_t)alGetBuffer3f);
  hook_thumb(find_addr_by_symbol("alGetBuffer3i"), (uintptr_t)alGetBuffer3i);
  hook_thumb(find_addr_by_symbol("alGetBufferSamplesSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetBufferf"), (uintptr_t)alGetBufferf);
  hook_thumb(find_addr_by_symbol("alGetBufferfv"), (uintptr_t)alGetBufferfv);
  hook_thumb(find_addr_by_symbol("alGetBufferi"), (uintptr_t)alGetBufferi);
  hook_thumb(find_addr_by_symbol("alGetBufferiv"), (uintptr_t)alGetBufferiv);
  hook_thumb(find_addr_by_symbol("alGetDouble"), (uintptr_t)alGetDouble);
  hook_thumb(find_addr_by_symbol("alGetDoublev"), (uintptr_t)alGetDoublev);
  hook_thumb(find_addr_by_symbol("alGetEffectf"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetEffectfv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetEffecti"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetEffectiv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetEnumValue"), (uintptr_t)alGetEnumValue);
  hook_thumb(find_addr_by_symbol("alGetError"), (uintptr_t)alGetError);
  hook_thumb(find_addr_by_symbol("alGetFilterf"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetFilterfv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetFilteri"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetFilteriv"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetFloat"), (uintptr_t)alGetFloat);
  hook_thumb(find_addr_by_symbol("alGetFloatv"), (uintptr_t)alGetFloatv);
  hook_thumb(find_addr_by_symbol("alGetInteger"), (uintptr_t)alGetInteger);
  hook_thumb(find_addr_by_symbol("alGetIntegerv"), (uintptr_t)alGetIntegerv);
  hook_thumb(find_addr_by_symbol("alGetListener3f"), (uintptr_t)alGetListener3f);
  hook_thumb(find_addr_by_symbol("alGetListener3i"), (uintptr_t)alGetListener3i);
  hook_thumb(find_addr_by_symbol("alGetListenerf"), (uintptr_t)alGetListenerf);
  hook_thumb(find_addr_by_symbol("alGetListenerfv"), (uintptr_t)alGetListenerfv);
  hook_thumb(find_addr_by_symbol("alGetListeneri"), (uintptr_t)alGetListeneri);
  hook_thumb(find_addr_by_symbol("alGetListeneriv"), (uintptr_t)alGetListeneriv);
  hook_thumb(find_addr_by_symbol("alGetProcAddress"), (uintptr_t)alGetProcAddress);
  hook_thumb(find_addr_by_symbol("alGetSource3dSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetSource3f"), (uintptr_t)alGetSource3f);
  hook_thumb(find_addr_by_symbol("alGetSource3i"), (uintptr_t)alGetSource3i);
  hook_thumb(find_addr_by_symbol("alGetSource3i64SOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetSourcedSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetSourcedvSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetSourcef"), (uintptr_t)alGetSourcef);
  hook_thumb(find_addr_by_symbol("alGetSourcefv"), (uintptr_t)alGetSourcefv);
  hook_thumb(find_addr_by_symbol("alGetSourcei"), (uintptr_t)alGetSourcei);
  hook_thumb(find_addr_by_symbol("alGetSourcei64SOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetSourcei64vSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alGetSourceiv"), (uintptr_t)alGetSourceiv);
  hook_thumb(find_addr_by_symbol("alGetString"), (uintptr_t)alGetString);
  hook_thumb(find_addr_by_symbol("alIsAuxiliaryEffectSlot"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alIsBuffer"), (uintptr_t)alIsBuffer);
  hook_thumb(find_addr_by_symbol("alIsBufferFormatSupportedSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alIsEffect"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alIsEnabled"), (uintptr_t)alIsEnabled);
  hook_thumb(find_addr_by_symbol("alIsExtensionPresent"), (uintptr_t)alIsExtensionPresent);
  hook_thumb(find_addr_by_symbol("alIsFilter"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alIsSource"), (uintptr_t)alIsSource);
  hook_thumb(find_addr_by_symbol("alListener3f"), (uintptr_t)alListener3f);
  hook_thumb(find_addr_by_symbol("alListener3i"), (uintptr_t)alListener3i);
  hook_thumb(find_addr_by_symbol("alListenerf"), (uintptr_t)alListenerf);
  hook_thumb(find_addr_by_symbol("alListenerfv"), (uintptr_t)alListenerfv);
  hook_thumb(find_addr_by_symbol("alListeneri"), (uintptr_t)alListeneri);
  hook_thumb(find_addr_by_symbol("alListeneriv"), (uintptr_t)alListeneriv);
  hook_thumb(find_addr_by_symbol("alProcessUpdatesSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alSetConfigMOB"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alSetError"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alSource3dSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alSource3f"), (uintptr_t)alSource3f);
  hook_thumb(find_addr_by_symbol("alSource3i"), (uintptr_t)alSource3i);
  hook_thumb(find_addr_by_symbol("alSource3i64SOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alSourcePause"), (uintptr_t)alSourcePause);
  hook_thumb(find_addr_by_symbol("alSourcePausev"), (uintptr_t)alSourcePausev);
  hook_thumb(find_addr_by_symbol("alSourcePlay"), (uintptr_t)alSourcePlay);
  hook_thumb(find_addr_by_symbol("alSourcePlayv"), (uintptr_t)alSourcePlayv);
  hook_thumb(find_addr_by_symbol("alSourceQueueBuffers"), (uintptr_t)alSourceQueueBuffers);
  hook_thumb(find_addr_by_symbol("alSourceRewind"), (uintptr_t)alSourceRewind);
  hook_thumb(find_addr_by_symbol("alSourceRewindv"), (uintptr_t)alSourceRewindv);
  hook_thumb(find_addr_by_symbol("alSourceStop"), (uintptr_t)alSourceStop);
  hook_thumb(find_addr_by_symbol("alSourceStopv"), (uintptr_t)alSourceStopv);
  hook_thumb(find_addr_by_symbol("alSourceUnqueueBuffers"), (uintptr_t)alSourceUnqueueBuffers);
  hook_thumb(find_addr_by_symbol("alSourcedSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alSourcedvSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alSourcef"), (uintptr_t)alSourcef);
  hook_thumb(find_addr_by_symbol("alSourcefv"), (uintptr_t)alSourcefv);
  hook_thumb(find_addr_by_symbol("alSourcei"), (uintptr_t)alSourcei);
  hook_thumb(find_addr_by_symbol("alSourcei64SOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alSourcei64vSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alSourceiv"), (uintptr_t)alSourceiv);
  hook_thumb(find_addr_by_symbol("alSpeedOfSound"), (uintptr_t)alSpeedOfSound);
  hook_thumb(find_addr_by_symbol("alcCaptureCloseDevice"), (uintptr_t)alcCaptureCloseDevice);
  hook_thumb(find_addr_by_symbol("alcCaptureOpenDevice"), (uintptr_t)alcCaptureOpenDevice);
  hook_thumb(find_addr_by_symbol("alcCaptureSamples"), (uintptr_t)alcCaptureSamples);
  hook_thumb(find_addr_by_symbol("alcCaptureStart"), (uintptr_t)alcCaptureStart);
  hook_thumb(find_addr_by_symbol("alcCaptureStop"), (uintptr_t)alcCaptureStop);
  hook_thumb(find_addr_by_symbol("alcCloseDevice"), (uintptr_t)alcCloseDevice);
  hook_thumb(find_addr_by_symbol("alcCreateContext"), (uintptr_t)alcCreateContext);
  hook_thumb(find_addr_by_symbol("alcDestroyContext"), (uintptr_t)alcDestroyContext);
  hook_thumb(find_addr_by_symbol("alcDeviceEnableHrtfMOB"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alcGetContextsDevice"), (uintptr_t)alcGetContextsDevice);
  hook_thumb(find_addr_by_symbol("alcGetCurrentContext"), (uintptr_t)alcGetCurrentContext);
  hook_thumb(find_addr_by_symbol("alcGetDeviceReferenceCount"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alcGetEnumValue"), (uintptr_t)alcGetEnumValue);
  hook_thumb(find_addr_by_symbol("alcGetError"), (uintptr_t)alcGetError);
  hook_thumb(find_addr_by_symbol("alcGetIntegerv"), (uintptr_t)alcGetIntegerv);
  hook_thumb(find_addr_by_symbol("alcGetJavaVM"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alcGetProcAddress"), (uintptr_t)alcGetProcAddress);
  hook_thumb(find_addr_by_symbol("alcGetString"), (uintptr_t)alcGetString);
  hook_thumb(find_addr_by_symbol("alcGetThreadContext"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alcIsExtensionPresent"), (uintptr_t)alcIsExtensionPresent);
  hook_thumb(find_addr_by_symbol("alcIsRenderFormatSupportedSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alcLoopbackOpenDeviceSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alcMakeContextCurrent"), (uintptr_t)alcMakeContextCurrent);
  hook_thumb(find_addr_by_symbol("alcOpenDevice"), (uintptr_t)alcOpenDevice);
  hook_thumb(find_addr_by_symbol("alcProcessContext"), (uintptr_t)alcProcessContext);
  hook_thumb(find_addr_by_symbol("alcRenderSamplesSOFT"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alcResume"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alcSetThreadContext"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alcSuspend"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alcSuspendContext"), (uintptr_t)alcSuspendContext);
  hook_thumb(find_addr_by_symbol("alc_audiotrack_deinit"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_audiotrack_init"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_audiotrack_probe"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_loopback_deinit"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_loopback_init"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_loopback_probe"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_null_deinit"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_null_init"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_null_probe"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_opensl_deinit"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_opensl_init"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("alc_opensl_probe"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("aluHandleDisconnect"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("aluInitPanning"), (uintptr_t)ret0);
  hook_thumb(find_addr_by_symbol("aluMixData"), (uintptr_t)ret0);
}
